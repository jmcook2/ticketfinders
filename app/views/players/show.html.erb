<% if @competition %>

  <div class="row">
    <ul class="breadcrumbs">
      <li><%= link_to 'Home', root_url %></li>
      <li><%= link_to 'Categories', categories_path %></li>
      <li><%= link_to @category.description, category_path(@category) %></li>
      <li><%= link_to @competition.name, competition_path(@competition) %></li>
      <li class="current"><%= @player.name %></li>
    </ul>
  </div>

  <div class="row">
    <div class="small-12 columns">
      <h3 class="gotham-regular"><%= @player.name %> | <%= @competition.name %></h3>
    </div>
  </div>

<% if @player.text && @player.avatar? %>

  <div class="row">
    <div class="small-12 medium-2 columns">
      <%= image_tag((@player.avatar.tiny.url)) %>
    </div>
  <br />

  <div class="gotham-regular text-text">
    <div class="small-12 medium-10 columns">
      <% if @player.text.length > 250 %>
        <%= truncate(@player.text, length: 250) %>
        <%= link_to 'Read more', '', class: "read-more-#{@player.id}" %>
        <script>
          $('.read-more-<%= @player.id %>').on('click', function(e) {
            e.preventDefault();
            $(this).parent().html('<%= escape_javascript @player.text %>');
          });
        </script>
      <% else %>
        <%= @player.text %>
      <% end %>
    </div>
  </div>
  </div>
  <br />

<% elsif @player.text %>

  <div class="row gotham-regular text-text">
    <div class="small-12 columns">
      <% if @player.text.length > 250 %>
        <%= truncate(@player.text, length: 250) %>
        <%= link_to 'Read more', '', class: "read-more-#{@player.id}" %>
        <script>
          $('.read-more-<%= @player.id %>').on('click', function(e) {
            e.preventDefault();
            $(this).parent().html('<%= escape_javascript @player.text %>');
          });
        </script>
      <% else %>
        <%= @player.text %>
      <% end %>
    </div>
  </div>
  <br />

<% elsif @player.avatar? %>

    <div class="row">
      <div class="small-12 columns">
        <%= image_tag((@player.avatar.tiny.url)) %>
      </div>
    </div>

<% end %>

  <section class="grey-bg">
    <% @events.each do |event| %>
      <div class="row event-tile">
        <div class="small-6 medium-2 columns">
          <%= image_tag(event.avatar.tiny.url) %>
        </div>
        <div class="small-6 medium-10 columns text-left">
          <%= link_to event.name, event_path(event, :comp => @competition, :player => @player), data: { no_turbolink: true }, class: "event-link" %><br />
          <%= nice_time(event.start_time) %><br />
          <%= event.venue.name %>
        </div>
      </div>
    <% end %>
  </section>

<% else %>

  <div class="row">
    <ul class="breadcrumbs">
      <li><%= link_to 'Home', root_url %></li>
      <li><%= link_to 'Categories', categories_path %></li>
      <li><%= link_to @category.description, category_path(@category) %></li>
      <li class="current"><%= @player.name %></li>
    </ul>
  </div>

  <div class="row">
    <div class="small-12 columns">
      <h3 class="gotham-regular"><%= @player.name %></h3>
    </div>
  </div>

<% if @player.text %>

  <div class="row gotham-regular text-text">
    <div class="small-12 columns">
      <% if @player.text.length > 250 %>
        <%= truncate(@player.text, length: 250) %>
        <%= link_to 'Read more', '', class: "read-more-#{@player.id}" %>
        <script>
          $('.read-more-<%= @player.id %>').on('click', function(e) {
            e.preventDefault();
            $(this).parent().html('<%= escape_javascript @player.text %>');
          });
        </script>
      <% else %>
        <%= @player.text %>
      <% end %>
    </div>
  </div>
  <br />
<% end %>

  <section class="grey-bg">
    <% @events.each do |event| %>
      <div class="row event-tile">
        <div class="small-6 medium-2 columns">
          <%= image_tag(event.avatar.tiny.url) %>
        </div>
        <div class="small-6 medium-10 columns text-left">
          <%= link_to event.name, event_path(event), data: { no_turbolink: true }, class: "event-link" %><br />
          <%= nice_time(event.start_time) %><br />
          <%= event.venue.name %>
        </div>
      </div>
    <% end %>
  </section>

<% end %>
