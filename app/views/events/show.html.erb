<% title @event.name %>
<% gon include_gon %>

<div class="row">
  <div class="small-12 columns">&nbsp;</div>
</div>

<% if @competition && @player %>

  <div class="row">
    <ul class="breadcrumbs">
      <li><%= link_to 'Home', root_url %></li>
      <li><%= link_to 'Categories', categories_path %></li>
      <li><%= link_to @category.description, category_path(@category) %></li>
      <li><%= link_to @competition.name, competition_path(@competition) %></li>
      <li><%= link_to @player.name, player_path(@player, :comp => @competition) %></li>
      <li class="current"><%= @event.name %></li>
    </ul>
  </div>

<% elsif @competition %>

  <div class="row">
    <ul class="breadcrumbs">
      <li><%= link_to 'Home', root_url %></li>
      <li><%= link_to 'Categories', categories_path %></li>
      <li><%= link_to @category.description, category_path(@category) %></li>
      <li><%= link_to @competition.name, competition_path(@competition) %></li>
      <li class="current"><%= @event.name %></li>
    </ul>
  </div>

<% else %>

<div class="row">
  <ul class="breadcrumbs">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Categories', categories_path %></li>
    <li><%= link_to @category_description, category_path(@category) %></li>
    <li class="current"><%= @event.name %></li>
  </ul>
</div>

<% end %>

<section class="grey-bg">
  <div class="row">
    <div class="small-12 medium-6 columns">
      <%= image_tag @event.avatar.url %>
    </div>
  </div>
</section>

<div id="map"></div>

<script type="text/javascript">
  function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: gon.latitude, lng: gon.longitude},
      zoom: 12,
      scrollwheel: false,
      navigationControl: false,
      mapTypeControl: false,
      scaleControl: false,
      draggable: false,

      styles: [{
        "featureType": "water",
        "elementType": "geometry",
        "stylers": [
        {
          "color": "#ABC1D6"
        }]
      }]

    });

    var getCen = map.getCenter();
    google.maps.event.addDomListener(window, 'resize', function() {
      map.setCenter(getCen);
    });

    var marker = new google.maps.Marker({
      position: {lat: gon.latitude, lng: gon.longitude},
      map: map,
    });
  }
</script>

<script async defer
  src="https://maps.googleapis.com/maps/api/js?callback=initMap">
</script>
