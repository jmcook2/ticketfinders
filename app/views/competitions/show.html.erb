<div class="row">
  <ul class="breadcrumbs">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Categories', categories_path %></li>
    <li><%= link_to @category.description, category_path(@category) %></li>
    <li class="current"><%= @competition.name %></li>
  </ul>
</div>

<div class="row">
  <div class="small-12 columns">
    <h4 class="gotham-regular"><%= @competition.name %></h4>
  </div>
</div>

<% if @competition.text && @competition.avatar? %>

  <div class="row">
    <div class="small-12 medium-2 columns">
      <%= image_tag((@competition.avatar.tiny.url)) %>
    </div>
  <br />

  <div class="gotham-regular text-text">
    <div class="small-12 medium-10 columns">
      <% if @competition.text.length > 250 %>
        <%= truncate(@competition.text, length: 250) %>
        <%= link_to 'Read more', '', class: "read-more-#{@competition.id}" %>
        <script>
          $('.read-more-<%= @competition.id %>').on('click', function(e) {
            e.preventDefault();
            $(this).parent().html('<%= escape_javascript @competition.text %>');
          });
        </script>
      <% else %>
        <%= @competition.text %>
      <% end %>
    </div>
  </div>
  </div>
  <br />

<% elsif @competition.text %>

  <div class="row gotham-regular text-text">
    <div class="small-12 columns">
      <% if @competition.text.length > 250 %>
        <%= truncate(@competition.text, length: 250) %>
        <%= link_to 'Read more', '', class: "read-more-#{@competition.id}" %>
        <script>
          $('.read-more-<%= @competition.id %>').on('click', function(e) {
            e.preventDefault();
            $(this).parent().html('<%= escape_javascript @competition.text %>');
          });
        </script>
      <% else %>
        <%= @competition.text %>
      <% end %>
    </div>
  </div>
  <br />

<% elsif @competition.avatar? %>

    <div class="row">
      <div class="small-12 columns">
        <%= image_tag((@competition.avatar.tiny.url)) %>
      </div>
    </div>

<% end %>

<% if @players.count > 0 %>

  <section class="grey-bg">
    <% @players.each do |player| %>
      <div class="row">
        <div class="small-12 columns">
          <%= link_to player.name, player_path(player, :comp => @competition) %>
        </div>
      </div>
    <% end %>
  </section>

<% elsif @events.count > 0 %>

  <section class="grey-bg">
    <% @events.each do |event| %>
      <div class="row event-tile">
        <div class="small-12 medium-2 columns">
          <%= event.name %>
        </div>
        <div class="small-12 medium-10 columns text-left">
          <%= link_to event.name, event_path(event), data: { no_turbolink: true }, class: "event-link" %><br />
          <%= nice_time(event.start_time) %><br />
          <%= event.venue.name %>
        </div>
      </div>
    <% end %>
  </section>

<% else %>

  <section class="grey-bg">
    <div class="row">
      <div class="small-12 columns">
        <p>We don't currently have any events for this competition</p>
      </div>
    </div>
  </section>

<% end %>
